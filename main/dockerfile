FROM bellsoft/liberica-openjdk-alpine:17 AS builder
FROM bellsoft/liberica-openjdk-alpine:17

CMD ["./gradlew", "clean", "build"]

VOLUME /tmp

ARG JAR_FILE=build/libs/*.jar

COPY ${JAR_FILE} app.jar

ENTRYPOINT ["java","Dcom.sun.management.jmxremote=true",
                   "Dcom.sun.management.jmxremote.local.only=false",
                           "Dcom.sun.management.jmxremote.port=9010",
                           "Dcom.sun.management.jmxremote.ssl=false",
                          "Dcom.sun.management.jmxremote.authenticate=false",
                           "Djava.rmi.server.hostname=34.64.170.190",
                           "Dcom.sun.management.jmxremote.rmi.port=9010","-jar","/app.jar"]